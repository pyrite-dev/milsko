# $Id$
CC = cl /TC /c /nologo
LD = link /nologo

CFLAGS = /Iinclude /D_MILSKO /DUSE_GDI /DUSE_STB_TRUETYPE /DUSE_STB_IMAGE /DSTBI_NO_SIMD
LDFLAGS = /DLL
.SUFFIXES: .obj .c
all: src\Mw.dll
clean: 
	del /f /q src\core.obj
	del /f /q src\text.obj
	del /f /q src\string.obj
	del /f /q src\draw.obj
	del /f /q src\default.obj
	del /f /q src\filechooser.obj
	del /f /q src\lowlevel.obj
	del /f /q src\error.obj
	del /f /q src\unicode.obj
	del /f /q src\color.obj
	del /f /q src\directory.obj
	del /f /q src\messagebox.obj
	del /f /q external\stb_ds.obj
	del /f /q external\stb_image.obj
	del /f /q external\stb_truetype.obj
	del /f /q src\icon\info.obj
	del /f /q src\icon\note.obj
	del /f /q src\icon\warning.obj
	del /f /q src\icon\error.obj
	del /f /q src\icon\news.obj
	del /f /q src\icon\directory.obj
	del /f /q src\icon\file.obj
	del /f /q src\icon\back.obj
	del /f /q src\icon\forward.obj
	del /f /q src\icon\up.obj
	del /f /q src\icon\computer.obj
	del /f /q src\icon\search.obj
	del /f /q src\icon\down.obj
	del /f /q src\icon\left.obj
	del /f /q src\icon\right.obj
	del /f /q src\cursor\default.obj
	del /f /q src\cursor\cross.obj
	del /f /q src\cursor\text.obj
	del /f /q src\cursor\hidden.obj
	del /f /q src\widget\button.obj
	del /f /q src\widget\frame.obj
	del /f /q src\widget\opengl.obj
	del /f /q src\widget\window.obj
	del /f /q src\widget\menu.obj
	del /f /q src\widget\entry.obj
	del /f /q src\widget\submenu.obj
	del /f /q src\widget\viewport.obj
	del /f /q src\widget\image.obj
	del /f /q src\widget\scrollbar.obj
	del /f /q src\widget\checkbox.obj
	del /f /q src\widget\label.obj
	del /f /q src\widget\listbox.obj
	del /f /q src\widget\numberentry.obj
	del /f /q src\widget\progressbar.obj
	del /f /q src\widget\radiobox.obj
	del /f /q src\font\boldttf.obj
	del /f /q src\font\ttf.obj
	del /f /q src\font\boldfont.obj
	del /f /q src\font\font.obj
	del /f /q src\backend\gdi.obj
	del /f /q src\Mw.dll

src\Mw.dll:  src\core.obj src\text.obj src\string.obj src\draw.obj src\default.obj src\filechooser.obj src\lowlevel.obj src\error.obj src\unicode.obj src\color.obj src\directory.obj src\messagebox.obj external\stb_ds.obj external\stb_image.obj external\stb_truetype.obj src\icon\info.obj src\icon\note.obj src\icon\warning.obj src\icon\error.obj src\icon\news.obj src\icon\directory.obj src\icon\file.obj src\icon\back.obj src\icon\forward.obj src\icon\up.obj src\icon\computer.obj src\icon\search.obj src\icon\down.obj src\icon\left.obj src\icon\right.obj src\cursor\default.obj src\cursor\cross.obj src\cursor\text.obj src\cursor\hidden.obj src\widget\button.obj src\widget\frame.obj src\widget\opengl.obj src\widget\window.obj src\widget\menu.obj src\widget\entry.obj src\widget\submenu.obj src\widget\viewport.obj src\widget\image.obj src\widget\scrollbar.obj src\widget\checkbox.obj src\widget\label.obj src\widget\listbox.obj src\widget\numberentry.obj src\widget\progressbar.obj src\widget\radiobox.obj src\font\boldttf.obj src\font\ttf.obj src\font\boldfont.obj src\font\font.obj src\backend\gdi.obj
	$(LD) $(LDFLAGS)  /OUT:$@  src\core.obj src\text.obj src\string.obj src\draw.obj src\default.obj src\filechooser.obj src\lowlevel.obj src\error.obj src\unicode.obj src\color.obj src\directory.obj src\messagebox.obj external\stb_ds.obj external\stb_image.obj external\stb_truetype.obj src\icon\info.obj src\icon\note.obj src\icon\warning.obj src\icon\error.obj src\icon\news.obj src\icon\directory.obj src\icon\file.obj src\icon\back.obj src\icon\forward.obj src\icon\up.obj src\icon\computer.obj src\icon\search.obj src\icon\down.obj src\icon\left.obj src\icon\right.obj src\cursor\default.obj src\cursor\cross.obj src\cursor\text.obj src\cursor\hidden.obj src\widget\button.obj src\widget\frame.obj src\widget\opengl.obj src\widget\window.obj src\widget\menu.obj src\widget\entry.obj src\widget\submenu.obj src\widget\viewport.obj src\widget\image.obj src\widget\scrollbar.obj src\widget\checkbox.obj src\widget\label.obj src\widget\listbox.obj src\widget\numberentry.obj src\widget\progressbar.obj src\widget\radiobox.obj src\font\boldttf.obj src\font\ttf.obj src\font\boldfont.obj src\font\font.obj src\backend\gdi.obj  opengl32.lib gdi32.lib user32.lib
	

.c.obj:
	$(CC) $(CFLAGS) /Fo$@ $<
